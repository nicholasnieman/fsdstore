$(document).ready(function(){$.extend($.keyboard.keyaction,{rad:function(a){a.mode=0,a.$keyboard.find(".ui-keyboard-rad").addClass(a.options.css.buttonAction),a.$keyboard.find(".ui-keyboard-deg, .ui-keyboard-grad").removeClass(a.options.css.buttonAction)},deg:function(a){a.mode=1,a.$keyboard.find(".ui-keyboard-deg").addClass(a.options.css.buttonAction),a.$keyboard.find(".ui-keyboard-rad, .ui-keyboard-grad").removeClass(a.options.css.buttonAction)},grad:function(a){a.mode=2,a.$keyboard.find(".ui-keyboard-grad").addClass(a.options.css.buttonAction),a.$keyboard.find(".ui-keyboard-deg, .ui-keyboard-rad").removeClass(a.options.css.buttonAction)},clearall:function(a){a.$preview.val(""),$.keyboard.keyaction.mc(a)},mc:function(a){a.memory=a.memory2="",a.$keyboard.find(".ui-keyboard-mc").removeClass(a.options.css.buttonAction)},mr:function(a){a.$preview.val(function(b,c){return c+a.memory})},ms:function(a){a.memory=a.$preview.val(),a.$keyboard.find(".ui-keyboard-mc").addClass(a.options.css.buttonAction)},mplus:function(a){""===a.memory?$.keyboard.keyaction.mc(a):a.$preview.val(function(b,c){return""===c?"":parseFloat(c)+parseFloat(a.memory)})},"m-":function(a){""!==a.memory&&a.$preview.val(function(b,c){return""===c?"":c-a.memory})},ln:function(a){a.memory2="",a.$preview.val(function(a,b){return Math.log(b)})},log:function(a){a.memory2="",a.$preview.val(function(a,b){return Math.log(b,10)})},ex:function(a){a.memory2="",a.$preview.val(function(a,b){return Math.exp(b)})},sqrt:function(a){a.memory2="",a.$preview.val(function(a,b){return Math.sqrt(b)})},cuberoot:function(a){a.memory2="",a.$preview.val(function(a,b){return Math.pow(b,1/3)})},int:function(a){a.memory2="",a.$preview.val(function(a,b){return parseInt(b)})},x2:function(a){a.memory2="",a.$preview.val(function(a,b){return b*b})},x3:function(a){a.memory2="",a.$preview.val(function(a,b){return b*b*b})},"10x":function(a){a.memory2="",a.$preview.val(function(a,b){return Math.pow(10,b)})},"n!":function(a){a.memory2="",a.$preview.val(function(a,b){for(var c=b-1;c>0;c-=1)b*=c;return b})},invx:function(a){a.memory2="",a.$preview.val(function(a,b){return 1/b})},sin:function(a){a.memory2="",a.$preview.val(function(b,c){return rad=1===a.mode?c*(Math.PI/180):2===a.mode?c*(Math.PI/200):c,Math.sin(rad)})},sinh:function(a){a.memory2="",a.$preview.val(function(a,b){return(Math.exp(b)-Math.exp(-b))/2})},asin:function(a){a.memory2="",a.$preview.val(function(b,c){return rad=1===a.mode?c*(Math.PI/180):2===a.mode?c*(Math.PI/200):c,Math.asin(rad)})},asinh:function(a){a.memory2="",a.$preview.val(function(a,b){return Math.log(b+Math.sqrt(b*b+1))})},cos:function(a){a.memory2="",a.$preview.val(function(b,c){return rad=1===a.mode?c*(Math.PI/180):2===a.mode?c*(Math.PI/200):c,Math.cos(rad)})},cosh:function(a){a.memory2="",a.$preview.val(function(a,b){return(Math.exp(b)+Math.exp(-b))/2})},acos:function(a){a.memory2="",a.$preview.val(function(b,c){return rad=1===a.mode?c*(Math.PI/180):2===a.mode?c*(Math.PI/200):c,Math.acos(rad)})},acosh:function(a){a.memory2="",a.$preview.val(function(a,b){return b>=1?Math.log(b+Math.sqrt(b*b-1)):b})},tan:function(a){a.memory2="",a.$preview.val(function(b,c){return rad=1===a.mode?c*(Math.PI/180):2===a.mode?c*(Math.PI/200):c,Math.tan(rad)})},tanh:function(a){a.memory2="",a.$preview.val(function(a,b){return(Math.exp(b)-Math.exp(-b))/(Math.exp(b)+Math.exp(-b))})},atan:function(a){a.memory2="",a.$preview.val(function(b,c){return rad=1===a.mode?c*(Math.PI/180):2===a.mode?c*(Math.PI/200):c,Math.atan(rad)})},atanh:function(a){a.memory2="",a.$preview.val(function(a,b){return b>1?Math.log((1+b)/(1-b))/2:b})},pi:function(a){a.memory2="",a.$preview.val(Math.PI)},"2pi":function(a){a.memory2="",a.$preview.val(2*Math.PI)},yroot:function(a){a.memory2=["yroot",a.$preview.val()],a.$keyboard.find(".ui-keyboard-yroot").addClass(a.options.css.buttonAction),a.$preview.val("")},xy:function(a){a.memory2=["xy",a.$preview.val()],a.$keyboard.find(".ui-keyboard-xy").addClass(a.options.css.buttonAction),a.$preview.val("")},mod:function(a){a.$preview.val(function(a,b){return b+"%"})},equals:function(base){base.$preview.val(function(i,v){var fx=base.memory2||"";return""===fx?eval(v):"yroot"===fx[0]?Math.pow($.trim(fx[1]),1/$.trim(v)):"xy"===fx[0]?Math.pow($.trim(fx[1]),$.trim(v)):void 0}),base.memory2=""}}),$("#calc").keyboard({layout:"custom",display:{deg:"D:degrees",rad:"R:radians",grad:"G:grads","10x":"10ⁿ","2pi":"2π",acos:"cos⁻¹",acosh:"cosh⁻¹",asin:"sin⁻¹",asinh:"sinh⁻¹",atan:"tan⁻¹",atanh:"tanh⁻¹",clear:"CE",clearall:"C",cuberoot:"∛x",equals:"=",invx:"1⁄x","m-":"M-",mc:"MC",meta1:"Inv",mplus:"M+",mr:"MR",ms:"MS",pi:"π",sqrt:"√",x2:"x²",x3:"x³",xy:"xy",yroot:"yroot"},customLayout:{default:["{rad} {deg} {grad} {sp:.1} {MC} {MR} {MS} {MPLUS} {M-} {a}","{meta1} {ln} ( ) {b} {clear} {clearall} {sign} {sqrt} {c}","{sinh} {sin} {x2} {n!} 7 8 9 / %","{cosh} {cos} {xy} {yroot} 4 5 6 * {invx}","{tanh} {tan} {x3} {cuberoot} 1 2 3 - {equals}","{pi} {Int} {mod} {log} {10x} 0 {dec} +"],meta1:["{rad} {deg} {grad} {sp:.1} {MC} {MR} {MS} {MPLUS} {M-} {a}","{meta1} {ex} ( ) {b} {clear} {clearall} {sign} {sqrt} {c}","{asinh} {asin} {x2} {n!} 7 8 9 / %","{acosh} {acos} {xy} {yroot} 4 5 6 * {invx}","{atanh} {atan} {x3} {cuberoot} 1 2 3 - {equals}","{2pi} {Int} {mod} {log} {10x} 0 {dec} +"]},restrictInput:!0,useCombos:!1,wheelMessage:"",visible:function(a,b,c){var d=b.mode||0,e=".ui-keyboard-";e+=1===d?"deg":2===d?"grad":"rad",b.$keyboard.find(e).addClass(b.options.css.buttonAction)},change:function(a,b,c){""===b.memory2&&b.$keyboard.find(".ui-keyboard-xy, .ui-keyboard-yroot").removeClass(b.options.css.buttonAction)}}).addTyping().getkeyboard().reveal()});